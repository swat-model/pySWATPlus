
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../txtinout_reader/">
      
      
        <link rel="next" href="../sensitivity_analyzer/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>PerformanceMetrics - pySWATPlus</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pySWATPlus.PerformanceMetrics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="pySWATPlus" class="md-header__button md-logo" aria-label="pySWATPlus" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pySWATPlus
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PerformanceMetrics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../userguide/swatplus_simulation/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../txtinout_reader/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../CONTRIBUTING/" class="md-tabs__link">
        
  
  
    
  
  Contributor Guide

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Release Notes

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="pySWATPlus" class="md-nav__button md-logo" aria-label="pySWATPlus" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    pySWATPlus
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/swatplus_simulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SWAT+ Simulation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/sensitivity_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sensitivity Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/model_calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/data_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../txtinout_reader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TxtinoutReader
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    PerformanceMetrics
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    PerformanceMetrics
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        PerformanceMetrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PerformanceMetrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.indicator_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        indicator_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_from_abbr" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_from_abbr
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_kge" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_kge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_mare" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_mare
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_mse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_mse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_nse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_nse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_pbias" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_pbias
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_rmse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_rmse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.indicator_from_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        indicator_from_file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.scenario_indicators" class="md-nav__link">
    <span class="md-ellipsis">
      
        scenario_indicators
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensitivity_analyzer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SensitivityAnalyzer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Calibration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DataManager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributor Guide
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        PerformanceMetrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PerformanceMetrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.indicator_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        indicator_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_from_abbr" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_from_abbr
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_kge" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_kge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_mare" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_mare
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_mse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_mse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_nse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_nse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_pbias" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_pbias
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.compute_rmse" class="md-nav__link">
    <span class="md-ellipsis">
      
        compute_rmse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.indicator_from_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        indicator_from_file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pySWATPlus.PerformanceMetrics.scenario_indicators" class="md-nav__link">
    <span class="md-ellipsis">
      
        scenario_indicators
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>PerformanceMetrics</h1>

<div class="doc doc-object doc-class">



<h2 id="pySWATPlus.PerformanceMetrics" class="doc doc-heading">
            <code>PerformanceMetrics</code>


</h2>


    <div class="doc doc-contents first">



        <p>Provide functionality to evaluate model perfromance between simulated and ovserved values.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PerformanceMetrics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Provide functionality to evaluate model perfromance between simulated and ovserved values.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">indicator_names</span><span class="p">(</span>
        <span class="bp">self</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a dictionary of available performance indicators. The keys are</span>
<span class="sd">        commonly used abbreviations, and the values are the corresponding full</span>
<span class="sd">        indicator names. The computed indicator values are treated as performance</span>
<span class="sd">        metrics of the model. Available abbreviations:</span>

<span class="sd">        - `NSE`: Nash–Sutcliffe Efficiency</span>
<span class="sd">        - `KGE`: Kling–Gupta Efficiency</span>
<span class="sd">        - `MSE`: Mean Squared Error</span>
<span class="sd">        - `RMSE`: Root Mean Squared Error</span>
<span class="sd">        - `PBIAS`: Percent Bias</span>
<span class="sd">        - `MARE`: Mean Absolute Relative Error</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">abbr_name</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;NSE&#39;</span><span class="p">:</span> <span class="s1">&#39;Nash-Sutcliffe Efficiency&#39;</span><span class="p">,</span>
            <span class="s1">&#39;KGE&#39;</span><span class="p">:</span> <span class="s1">&#39;Kling-Gupta Efficiency&#39;</span><span class="p">,</span>
            <span class="s1">&#39;MSE&#39;</span><span class="p">:</span> <span class="s1">&#39;Mean Squared Error&#39;</span><span class="p">,</span>
            <span class="s1">&#39;RMSE&#39;</span><span class="p">:</span> <span class="s1">&#39;Root Mean Squared Error&#39;</span><span class="p">,</span>
            <span class="s1">&#39;PBIAS&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent Bias&#39;</span><span class="p">,</span>
            <span class="s1">&#39;MARE&#39;</span><span class="p">:</span> <span class="s1">&#39;Mean Absolute Relative Error&#39;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">abbr_name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_nse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the [`Nash-Sutcliffe Efficiency`](https://doi.org/10.1016/0022-1694(70)90255-6)</span>
<span class="sd">        metric between simulated and observed values</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Nash-Sutcliffe Efficiency` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_nse</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Simulation values</span>
        <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Observed values</span>
        <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Output</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="p">((</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="p">((</span><span class="n">obs_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">numerator</span> <span class="o">/</span> <span class="n">denominator</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_kge</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the [`Kling-Gupta Efficiency`](https://doi.org/10.1016/j.jhydrol.2009.08.003)</span>
<span class="sd">        metric between simulated and observed values</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Kling-Gupta Efficiency` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_kge</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Simulation values</span>
        <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Observed values</span>
        <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Pearson correlation coefficient (r)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">obs_arr</span><span class="p">)</span>

        <span class="c1"># Variability of prediction errors</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

        <span class="c1"># Bias</span>
        <span class="n">beta</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

        <span class="c1"># Output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">alpha</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_mse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the `Mean Squared Error` metric between simulated and observed values</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Mean Squared Error` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_mse</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Simulation values</span>
        <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Observed values</span>
        <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(((</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_rmse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the `Root Mean Squared Error` metric between simulated and observed values.</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Root Mean Squared Error` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_rmse</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># computer MSE error</span>
        <span class="n">mse_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_mse</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
            <span class="n">sim_col</span><span class="o">=</span><span class="n">sim_col</span><span class="p">,</span>
            <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
        <span class="p">)</span>

        <span class="c1"># Output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">mse_value</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_pbias</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the `Percent Bias` metric between simulated and observed values.</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Percent Bias` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_pbias</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Simulation values</span>
        <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Observed values</span>
        <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_mare</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculate the `Mean Absolute Relative Error` metric between simulated and observed values</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed value of the `Mean Absolute Relative Error` metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_mare</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Simulation values</span>
        <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Observed values</span>
        <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(((</span><span class="n">obs_arr</span> <span class="o">-</span> <span class="n">sim_arr</span><span class="p">)</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_indicator_abbr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Validate each indicator abbreviation in the provided list.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">abbr_indicator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indicator_names</span>
        <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">abbr_indicator</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Invalid indicator &quot;</span><span class="si">{</span><span class="n">ind</span><span class="si">}</span><span class="s1">&quot;; expected names are </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">abbr_indicator</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_from_abbr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Compute the performance metric between simulated and observed values based on the provided indicator abbreviation.</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">            sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">            obs_col (str): Name of the column containing observed values.</span>

<span class="sd">            indicator (str): Abbreviation of the indicator, selected from the available options in the property</span>
<span class="sd">                [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Computed metric value corresponding to the specified indicator.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_from_abbr</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Validate abbreviation of indicators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
            <span class="n">indicators</span><span class="o">=</span><span class="p">[</span><span class="n">indicator</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Method from indicator abbreviation</span>
        <span class="n">indicator_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;compute_</span><span class="si">{</span><span class="n">indicator</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>

        <span class="c1"># Indicator value</span>
        <span class="n">indicator_value</span> <span class="o">=</span> <span class="n">indicator_method</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
            <span class="n">sim_col</span><span class="o">=</span><span class="n">sim_col</span><span class="p">,</span>
            <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">indicator_value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">scenario_indicators</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sensim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">df_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">json_file</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Compute performance metrics for sample scenarios obtained using the method</span>
<span class="sd">        [`simulation_by_sample_parameters`](https://swat-model.github.io/pySWATPlus/api/sensitivity_analyzer/#pySWATPlus.SensitivityAnalyzer.simulation_by_sample_parameters).</span>

<span class="sd">        Before computing the metrics, simulated and observed values are normalized using the formula `(v - min_o) / (max_o - min_o)`,</span>
<span class="sd">        where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively.</span>

<span class="sd">        The method returns a dictionary with two keys:</span>

<span class="sd">        - `problem`: The definition dictionary passed to sampling.</span>
<span class="sd">        - `indicator`: A `DataFrame` containing the `Scenario` column and one column per indicator,</span>
<span class="sd">          with scenario indices and corresponding indicator values.</span>

<span class="sd">        Before computing the indicators, both simulated and observed values are normalized using the formula</span>
<span class="sd">        `(v - min_o) / (max_o - min_o)`, where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively.</span>
<span class="sd">        All negative and `None` observed values are removed before computing `min_o` and `max_o` to prevent errors during normalization.</span>

<span class="sd">        Args:</span>
<span class="sd">            sensim_file (str | pathlib.Path): Path to the `sensitivity_simulation.json` file produced by `simulation_by_sobol_sample`.</span>

<span class="sd">            df_name (str): Name of the `DataFrame` within `sensitivity_simulation.json` from which to compute scenario indicators.</span>

<span class="sd">            sim_col (str): Name of the column in `df_name` containing simulated values.</span>

<span class="sd">            obs_file (str | pathlib.Path): Path to the CSV file containing observed data. The file must include a</span>
<span class="sd">                `date` column (used to merge simulated and observed data) and use a comma as the separator.</span>

<span class="sd">            date_format (str): Date format of the `date` column in `obs_file`, used to parse `datetime.date` objects from date strings.</span>

<span class="sd">            obs_col (str): Name of the column in `obs_file` containing observed data.</span>

<span class="sd">            indicators (list[str]): List of indicator abbreviations selected from the available options in the property</span>
<span class="sd">                [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">            json_file (str | pathlib.Path, optional): Path to a JSON file for saving the output `DataFrame` containing indicator values.</span>
<span class="sd">                If `None` (default), the `DataFrame` is not saved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with two keys, `problem` and `indicator`, and their corresponding values.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_indicators</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Validate abbreviation of indicators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
            <span class="n">indicators</span><span class="o">=</span><span class="n">indicators</span>
        <span class="p">)</span>

        <span class="c1"># Observed DataFrame</span>
        <span class="n">obs_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_observe</span><span class="p">(</span>
            <span class="n">obs_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">obs_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
            <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
            <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
        <span class="p">)</span>
        <span class="n">obs_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]</span>

        <span class="c1"># Retrieve sensitivity output</span>
        <span class="n">sensitivity_sim</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_sensitivity_output_retrieval</span><span class="p">(</span>
            <span class="n">sensim_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">sensim_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
            <span class="n">df_name</span><span class="o">=</span><span class="n">df_name</span><span class="p">,</span>
            <span class="n">add_problem</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">add_sample</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>

        <span class="c1"># Empty DataFrame to store scenario indicators</span>
        <span class="n">ind_df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">columns</span><span class="o">=</span><span class="n">indicators</span>
        <span class="p">)</span>

        <span class="c1"># Iterate scenarios</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">sensitivity_sim</span><span class="p">[</span><span class="s1">&#39;scenario&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">]]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;sim&#39;</span><span class="p">]</span>
            <span class="c1"># Merge scenario DataFrame with observed DataFrame</span>
            <span class="n">merge_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
                <span class="n">right</span><span class="o">=</span><span class="n">obs_df</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span>
                <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span>
            <span class="p">)</span>
            <span class="c1"># Normalized DataFrame</span>
            <span class="n">norm_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_normalize</span><span class="p">(</span>
                <span class="n">df</span><span class="o">=</span><span class="n">merge_df</span><span class="p">[[</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
                <span class="n">norm_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span>
            <span class="p">)</span>
            <span class="c1"># Iterate indicators</span>
            <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
                <span class="c1"># Store indicator value in DataFrame</span>
                <span class="n">ind_val</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">()</span><span class="o">.</span><span class="n">compute_from_abbr</span><span class="p">(</span>
                    <span class="n">df</span><span class="o">=</span><span class="n">norm_df</span><span class="p">,</span>
                    <span class="n">sim_col</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
                    <span class="n">obs_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span>
                    <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span>
                <span class="p">)</span>
                <span class="n">ind_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">indicator</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_val</span>

        <span class="c1"># Reset index to scenario column</span>
        <span class="n">scnro_col</span> <span class="o">=</span> <span class="s1">&#39;Scenario&#39;</span>
        <span class="n">ind_df</span> <span class="o">=</span> <span class="n">ind_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span>
            <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">ind_df</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_df</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

        <span class="c1"># Save DataFrame</span>
        <span class="k">if</span> <span class="n">json_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">json_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
            <span class="c1"># Raise error for invalid JSON file extension</span>
            <span class="n">validators</span><span class="o">.</span><span class="n">_json_extension</span><span class="p">(</span>
                <span class="n">json_file</span><span class="o">=</span><span class="n">json_file</span>
            <span class="p">)</span>
            <span class="c1"># Write DataFrame to the JSON file</span>
            <span class="n">ind_df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span>
                <span class="n">path_or_buf</span><span class="o">=</span><span class="n">json_file</span><span class="p">,</span>
                <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span>
                <span class="n">indent</span><span class="o">=</span><span class="mi">4</span>
            <span class="p">)</span>

        <span class="c1"># Output dictionary</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;problem&#39;</span><span class="p">:</span> <span class="n">sensitivity_sim</span><span class="p">[</span><span class="s1">&#39;problem&#39;</span><span class="p">],</span>
            <span class="s1">&#39;indicator&#39;</span><span class="p">:</span> <span class="n">ind_df</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">indicator_from_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">extract_sim</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>

<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Compute performance metrics for simulated values obtained using the method</span>
<span class="sd">        [`run_swat`](https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat).</span>

<span class="sd">        Before computing the indicators, simulated and observed values are normalized using the formula `(v - min_o) / (max_o - min_o)`,</span>
<span class="sd">        where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively. All negative and `None` observed values</span>
<span class="sd">        are removed before computing `min_o` and `max_o` to prevent errors during normalization.</span>

<span class="sd">        Args:</span>
<span class="sd">            sim_file (str | pathlib.Path): Path to the simulation file generated using the method</span>
<span class="sd">                [`run_swat`](https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat).</span>

<span class="sd">            sim_col (str): Name of the column in `sim_file` containing simulated data.</span>

<span class="sd">            extract_sim (dict[str, typing.Any]): Dictionary specifying input variable configurations for</span>
<span class="sd">                [`simulated_timeseries_df`](https://swat-model.github.io/pySWATPlus/api/data_manager/#pySWATPlus.DataManager.simulated_timeseries_df)</span>
<span class="sd">                to extract data from `sim_file`. Each key corresponds to an input variable name, and its value is the parameter supplied to the method.</span>

<span class="sd">                - *Required key:* `has_units`.</span>
<span class="sd">                - *Optional key:* `begin_date`, `end_date`, `ref_day`, `ref_month`, and `apply_filter`.</span>

<span class="sd">                !!! note</span>
<span class="sd">                    The optional key `usecols` should **not** be included in `extract_sim`. Although no error will be raised,</span>
<span class="sd">                    it will be ignored because the `sim_col` argument is internally used to define the `usecols` list.</span>

<span class="sd">            obs_file (str | pathlib.Path): Path to the CSV file containing observed data. The file must include a</span>
<span class="sd">                `date` column (used to merge simulated and observed data) and use a comma as the separator.</span>

<span class="sd">            date_format (str): Date format of the `date` column in `obs_file`, used to parse `datetime.date` objects from date strings.</span>

<span class="sd">            obs_col (str): Name of the column in `obs_file` containing observed data.</span>

<span class="sd">            indicators (list[str]): List of indicator abbreviations selected from the available options in the property</span>
<span class="sd">                [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary where each key is an indicator abbreviation, and value is the corresponding performance metric.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input variables type</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
            <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">indicator_from_file</span>
            <span class="p">),</span>
            <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Validate abbreviation of indicators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
            <span class="n">indicators</span><span class="o">=</span><span class="n">indicators</span>
        <span class="p">)</span>

        <span class="c1"># Simulated DataFrame</span>
        <span class="n">extract_sim</span><span class="p">[</span><span class="s1">&#39;usecols&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim_col</span><span class="p">]</span>
        <span class="n">sim_df</span> <span class="o">=</span> <span class="n">DataManager</span><span class="p">()</span><span class="o">.</span><span class="n">simulated_timeseries_df</span><span class="p">(</span>
            <span class="n">sim_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">sim_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">extract_sim</span>
        <span class="p">)</span>
        <span class="n">sim_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;sim&#39;</span><span class="p">]</span>

        <span class="c1"># Observed DataFrame</span>
        <span class="n">obs_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_observe</span><span class="p">(</span>
            <span class="n">obs_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">obs_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
            <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
            <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
        <span class="p">)</span>
        <span class="n">obs_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]</span>

        <span class="c1"># Merge simulated and observed DataFrames</span>
        <span class="n">merge_df</span> <span class="o">=</span> <span class="n">sim_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">obs_df</span><span class="p">,</span>
            <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span>
            <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span>
        <span class="p">)</span>

        <span class="c1"># Normalized DataFrame</span>
        <span class="n">norm_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_normalize</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">merge_df</span><span class="p">[[</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
            <span class="n">norm_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span>
        <span class="p">)</span>

        <span class="c1"># Empty dictionary to store indicator values</span>
        <span class="n">ind_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Iterate indicator</span>
        <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
            <span class="c1"># Store indicator value in dictionary</span>
            <span class="n">ind_val</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">()</span><span class="o">.</span><span class="n">compute_from_abbr</span><span class="p">(</span>
                <span class="n">df</span><span class="o">=</span><span class="n">norm_df</span><span class="p">,</span>
                <span class="n">sim_col</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
                <span class="n">obs_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span>
                <span class="n">indicator</span><span class="o">=</span><span class="n">ind</span>
            <span class="p">)</span>
            <span class="n">ind_dict</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_val</span>

        <span class="k">return</span> <span class="n">ind_dict</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pySWATPlus.PerformanceMetrics.indicator_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">indicator_names</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Returns a dictionary of available performance indicators. The keys are
commonly used abbreviations, and the values are the corresponding full
indicator names. The computed indicator values are treated as performance
metrics of the model. Available abbreviations:</p>
<ul>
<li><code>NSE</code>: Nash–Sutcliffe Efficiency</li>
<li><code>KGE</code>: Kling–Gupta Efficiency</li>
<li><code>MSE</code>: Mean Squared Error</li>
<li><code>RMSE</code>: Root Mean Squared Error</li>
<li><code>PBIAS</code>: Percent Bias</li>
<li><code>MARE</code>: Mean Absolute Relative Error</li>
</ul>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_from_abbr" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_from_abbr</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compute the performance metric between simulated and observed values based on the provided indicator abbreviation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>indicator</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Abbreviation of the indicator, selected from the available options in the property
<a href="https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names"><code>indicator_names</code></a>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed metric value corresponding to the specified indicator.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_from_abbr</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">indicator</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute the performance metric between simulated and observed values based on the provided indicator abbreviation.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">        indicator (str): Abbreviation of the indicator, selected from the available options in the property</span>
<span class="sd">            [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed metric value corresponding to the specified indicator.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_from_abbr</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Validate abbreviation of indicators</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
        <span class="n">indicators</span><span class="o">=</span><span class="p">[</span><span class="n">indicator</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Method from indicator abbreviation</span>
    <span class="n">indicator_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;compute_</span><span class="si">{</span><span class="n">indicator</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="p">)</span>

    <span class="c1"># Indicator value</span>
    <span class="n">indicator_value</span> <span class="o">=</span> <span class="n">indicator_method</span><span class="p">(</span>
        <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="o">=</span><span class="n">sim_col</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">indicator_value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_kge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_kge</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <a href="https://doi.org/10.1016/j.jhydrol.2009.08.003"><code>Kling-Gupta Efficiency</code></a>
metric between simulated and observed values</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Kling-Gupta Efficiency</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_kge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the [`Kling-Gupta Efficiency`](https://doi.org/10.1016/j.jhydrol.2009.08.003)</span>
<span class="sd">    metric between simulated and observed values</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Kling-Gupta Efficiency` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_kge</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Simulation values</span>
    <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Observed values</span>
    <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Pearson correlation coefficient (r)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">obs_arr</span><span class="p">)</span>

    <span class="c1"># Variability of prediction errors</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

    <span class="c1"># Bias</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">sim_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="c1"># Output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">alpha</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_mare" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_mare</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <code>Mean Absolute Relative Error</code> metric between simulated and observed values</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Mean Absolute Relative Error</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_mare</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the `Mean Absolute Relative Error` metric between simulated and observed values</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Mean Absolute Relative Error` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_mare</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Simulation values</span>
    <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Observed values</span>
    <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(((</span><span class="n">obs_arr</span> <span class="o">-</span> <span class="n">sim_arr</span><span class="p">)</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_mse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_mse</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <code>Mean Squared Error</code> metric between simulated and observed values</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Mean Squared Error</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_mse</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the `Mean Squared Error` metric between simulated and observed values</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Mean Squared Error` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_mse</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Simulation values</span>
    <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Observed values</span>
    <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(((</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_nse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_nse</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <a href="https://doi.org/10.1016/0022-1694(70)90255-6"><code>Nash-Sutcliffe Efficiency</code></a>
metric between simulated and observed values</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Nash-Sutcliffe Efficiency</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_nse</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the [`Nash-Sutcliffe Efficiency`](https://doi.org/10.1016/0022-1694(70)90255-6)</span>
<span class="sd">    metric between simulated and observed values</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Nash-Sutcliffe Efficiency` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_nse</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Simulation values</span>
    <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Observed values</span>
    <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Output</span>
    <span class="n">numerator</span> <span class="o">=</span> <span class="p">((</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">denominator</span> <span class="o">=</span> <span class="p">((</span><span class="n">obs_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">numerator</span> <span class="o">/</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_pbias" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_pbias</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <code>Percent Bias</code> metric between simulated and observed values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Percent Bias</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_pbias</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the `Percent Bias` metric between simulated and observed values.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Percent Bias` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_pbias</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Simulation values</span>
    <span class="n">sim_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sim_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Observed values</span>
    <span class="n">obs_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">obs_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="n">sim_arr</span> <span class="o">-</span> <span class="n">obs_arr</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">obs_arr</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.compute_rmse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_rmse</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate the <code>Root Mean Squared Error</code> metric between simulated and observed values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing at least two columns with simulated and observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing observed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Computed value of the <code>Root Mean Squared Error</code> metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_rmse</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Calculate the `Root Mean Squared Error` metric between simulated and observed values.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): DataFrame containing at least two columns with simulated and observed values.</span>

<span class="sd">        sim_col (str): Name of the column containing simulated values.</span>

<span class="sd">        obs_col (str): Name of the column containing observed values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Computed value of the `Root Mean Squared Error` metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_rmse</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># computer MSE error</span>
    <span class="n">mse_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_mse</span><span class="p">(</span>
        <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
        <span class="n">sim_col</span><span class="o">=</span><span class="n">sim_col</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
    <span class="p">)</span>

    <span class="c1"># Output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">mse_value</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.indicator_from_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">indicator_from_file</span><span class="p">(</span><span class="n">sim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extract_sim</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compute performance metrics for simulated values obtained using the method
<a href="https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat"><code>run_swat</code></a>.</p>
<p>Before computing the indicators, simulated and observed values are normalized using the formula <code>(v - min_o) / (max_o - min_o)</code>,
where <code>min_o</code> and <code>max_o</code> represent the minimum and maximum of observed values, respectively. All negative and <code>None</code> observed values
are removed before computing <code>min_o</code> and <code>max_o</code> to prevent errors during normalization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sim_file</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the simulation file generated using the method
<a href="https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat"><code>run_swat</code></a>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column in <code>sim_file</code> containing simulated data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>extract_sim</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary specifying input variable configurations for
<a href="https://swat-model.github.io/pySWATPlus/api/data_manager/#pySWATPlus.DataManager.simulated_timeseries_df"><code>simulated_timeseries_df</code></a>
to extract data from <code>sim_file</code>. Each key corresponds to an input variable name, and its value is the parameter supplied to the method.</p>
<ul>
<li><em>Required key:</em> <code>has_units</code>.</li>
<li><em>Optional key:</em> <code>begin_date</code>, <code>end_date</code>, <code>ref_day</code>, <code>ref_month</code>, and <code>apply_filter</code>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The optional key <code>usecols</code> should <strong>not</strong> be included in <code>extract_sim</code>. Although no error will be raised,
it will be ignored because the <code>sim_col</code> argument is internally used to define the <code>usecols</code> list.</p>
</div>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_file</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the CSV file containing observed data. The file must include a
<code>date</code> column (used to merge simulated and observed data) and use a comma as the separator.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Date format of the <code>date</code> column in <code>obs_file</code>, used to parse <code>datetime.date</code> objects from date strings.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column in <code>obs_file</code> containing observed data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>indicators</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of indicator abbreviations selected from the available options in the property
<a href="https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names"><code>indicator_names</code></a>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary where each key is an indicator abbreviation, and value is the corresponding performance metric.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">indicator_from_file</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">extract_sim</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
    <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute performance metrics for simulated values obtained using the method</span>
<span class="sd">    [`run_swat`](https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat).</span>

<span class="sd">    Before computing the indicators, simulated and observed values are normalized using the formula `(v - min_o) / (max_o - min_o)`,</span>
<span class="sd">    where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively. All negative and `None` observed values</span>
<span class="sd">    are removed before computing `min_o` and `max_o` to prevent errors during normalization.</span>

<span class="sd">    Args:</span>
<span class="sd">        sim_file (str | pathlib.Path): Path to the simulation file generated using the method</span>
<span class="sd">            [`run_swat`](https://swat-model.github.io/pySWATPlus/api/txtinout_reader/#pySWATPlus.TxtinoutReader.run_swat).</span>

<span class="sd">        sim_col (str): Name of the column in `sim_file` containing simulated data.</span>

<span class="sd">        extract_sim (dict[str, typing.Any]): Dictionary specifying input variable configurations for</span>
<span class="sd">            [`simulated_timeseries_df`](https://swat-model.github.io/pySWATPlus/api/data_manager/#pySWATPlus.DataManager.simulated_timeseries_df)</span>
<span class="sd">            to extract data from `sim_file`. Each key corresponds to an input variable name, and its value is the parameter supplied to the method.</span>

<span class="sd">            - *Required key:* `has_units`.</span>
<span class="sd">            - *Optional key:* `begin_date`, `end_date`, `ref_day`, `ref_month`, and `apply_filter`.</span>

<span class="sd">            !!! note</span>
<span class="sd">                The optional key `usecols` should **not** be included in `extract_sim`. Although no error will be raised,</span>
<span class="sd">                it will be ignored because the `sim_col` argument is internally used to define the `usecols` list.</span>

<span class="sd">        obs_file (str | pathlib.Path): Path to the CSV file containing observed data. The file must include a</span>
<span class="sd">            `date` column (used to merge simulated and observed data) and use a comma as the separator.</span>

<span class="sd">        date_format (str): Date format of the `date` column in `obs_file`, used to parse `datetime.date` objects from date strings.</span>

<span class="sd">        obs_col (str): Name of the column in `obs_file` containing observed data.</span>

<span class="sd">        indicators (list[str]): List of indicator abbreviations selected from the available options in the property</span>
<span class="sd">            [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary where each key is an indicator abbreviation, and value is the corresponding performance metric.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">indicator_from_file</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Validate abbreviation of indicators</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
        <span class="n">indicators</span><span class="o">=</span><span class="n">indicators</span>
    <span class="p">)</span>

    <span class="c1"># Simulated DataFrame</span>
    <span class="n">extract_sim</span><span class="p">[</span><span class="s1">&#39;usecols&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim_col</span><span class="p">]</span>
    <span class="n">sim_df</span> <span class="o">=</span> <span class="n">DataManager</span><span class="p">()</span><span class="o">.</span><span class="n">simulated_timeseries_df</span><span class="p">(</span>
        <span class="n">sim_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">sim_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
        <span class="o">**</span><span class="n">extract_sim</span>
    <span class="p">)</span>
    <span class="n">sim_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;sim&#39;</span><span class="p">]</span>

    <span class="c1"># Observed DataFrame</span>
    <span class="n">obs_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_observe</span><span class="p">(</span>
        <span class="n">obs_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">obs_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
        <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
    <span class="p">)</span>
    <span class="n">obs_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]</span>

    <span class="c1"># Merge simulated and observed DataFrames</span>
    <span class="n">merge_df</span> <span class="o">=</span> <span class="n">sim_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">right</span><span class="o">=</span><span class="n">obs_df</span><span class="p">,</span>
        <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span>
    <span class="p">)</span>

    <span class="c1"># Normalized DataFrame</span>
    <span class="n">norm_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_normalize</span><span class="p">(</span>
        <span class="n">df</span><span class="o">=</span><span class="n">merge_df</span><span class="p">[[</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
        <span class="n">norm_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span>
    <span class="p">)</span>

    <span class="c1"># Empty dictionary to store indicator values</span>
    <span class="n">ind_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Iterate indicator</span>
    <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
        <span class="c1"># Store indicator value in dictionary</span>
        <span class="n">ind_val</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">()</span><span class="o">.</span><span class="n">compute_from_abbr</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">norm_df</span><span class="p">,</span>
            <span class="n">sim_col</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
            <span class="n">obs_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span>
            <span class="n">indicator</span><span class="o">=</span><span class="n">ind</span>
        <span class="p">)</span>
        <span class="n">ind_dict</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_val</span>

    <span class="k">return</span> <span class="n">ind_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pySWATPlus.PerformanceMetrics.scenario_indicators" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">scenario_indicators</span><span class="p">(</span><span class="n">sensim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">df_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">json_file</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compute performance metrics for sample scenarios obtained using the method
<a href="https://swat-model.github.io/pySWATPlus/api/sensitivity_analyzer/#pySWATPlus.SensitivityAnalyzer.simulation_by_sample_parameters"><code>simulation_by_sample_parameters</code></a>.</p>
<p>Before computing the metrics, simulated and observed values are normalized using the formula <code>(v - min_o) / (max_o - min_o)</code>,
where <code>min_o</code> and <code>max_o</code> represent the minimum and maximum of observed values, respectively.</p>
<p>The method returns a dictionary with two keys:</p>
<ul>
<li><code>problem</code>: The definition dictionary passed to sampling.</li>
<li><code>indicator</code>: A <code>DataFrame</code> containing the <code>Scenario</code> column and one column per indicator,
  with scenario indices and corresponding indicator values.</li>
</ul>
<p>Before computing the indicators, both simulated and observed values are normalized using the formula
<code>(v - min_o) / (max_o - min_o)</code>, where <code>min_o</code> and <code>max_o</code> represent the minimum and maximum of observed values, respectively.
All negative and <code>None</code> observed values are removed before computing <code>min_o</code> and <code>max_o</code> to prevent errors during normalization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sensim_file</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the <code>sensitivity_simulation.json</code> file produced by <code>simulation_by_sobol_sample</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>df_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the <code>DataFrame</code> within <code>sensitivity_simulation.json</code> from which to compute scenario indicators.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sim_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column in <code>df_name</code> containing simulated values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_file</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the CSV file containing observed data. The file must include a
<code>date</code> column (used to merge simulated and observed data) and use a comma as the separator.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Date format of the <code>date</code> column in <code>obs_file</code>, used to parse <code>datetime.date</code> objects from date strings.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obs_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column in <code>obs_file</code> containing observed data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>indicators</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of indicator abbreviations selected from the available options in the property
<a href="https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names"><code>indicator_names</code></a>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>json_file</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to a JSON file for saving the output <code>DataFrame</code> containing indicator values.
If <code>None</code> (default), the <code>DataFrame</code> is not saved.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with two keys, <code>problem</code> and <code>indicator</code>, and their corresponding values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pySWATPlus/performance_metrics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">scenario_indicators</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sensim_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">df_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">sim_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">obs_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">indicators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">json_file</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Compute performance metrics for sample scenarios obtained using the method</span>
<span class="sd">    [`simulation_by_sample_parameters`](https://swat-model.github.io/pySWATPlus/api/sensitivity_analyzer/#pySWATPlus.SensitivityAnalyzer.simulation_by_sample_parameters).</span>

<span class="sd">    Before computing the metrics, simulated and observed values are normalized using the formula `(v - min_o) / (max_o - min_o)`,</span>
<span class="sd">    where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively.</span>

<span class="sd">    The method returns a dictionary with two keys:</span>

<span class="sd">    - `problem`: The definition dictionary passed to sampling.</span>
<span class="sd">    - `indicator`: A `DataFrame` containing the `Scenario` column and one column per indicator,</span>
<span class="sd">      with scenario indices and corresponding indicator values.</span>

<span class="sd">    Before computing the indicators, both simulated and observed values are normalized using the formula</span>
<span class="sd">    `(v - min_o) / (max_o - min_o)`, where `min_o` and `max_o` represent the minimum and maximum of observed values, respectively.</span>
<span class="sd">    All negative and `None` observed values are removed before computing `min_o` and `max_o` to prevent errors during normalization.</span>

<span class="sd">    Args:</span>
<span class="sd">        sensim_file (str | pathlib.Path): Path to the `sensitivity_simulation.json` file produced by `simulation_by_sobol_sample`.</span>

<span class="sd">        df_name (str): Name of the `DataFrame` within `sensitivity_simulation.json` from which to compute scenario indicators.</span>

<span class="sd">        sim_col (str): Name of the column in `df_name` containing simulated values.</span>

<span class="sd">        obs_file (str | pathlib.Path): Path to the CSV file containing observed data. The file must include a</span>
<span class="sd">            `date` column (used to merge simulated and observed data) and use a comma as the separator.</span>

<span class="sd">        date_format (str): Date format of the `date` column in `obs_file`, used to parse `datetime.date` objects from date strings.</span>

<span class="sd">        obs_col (str): Name of the column in `obs_file` containing observed data.</span>

<span class="sd">        indicators (list[str]): List of indicator abbreviations selected from the available options in the property</span>
<span class="sd">            [`indicator_names`](https://swatmodel.github.io/pySWATPlus/api/performance_metrics/#pySWATPlus.PerformanceMetrics.indicator_names).</span>

<span class="sd">        json_file (str | pathlib.Path, optional): Path to a JSON file for saving the output `DataFrame` containing indicator values.</span>
<span class="sd">            If `None` (default), the `DataFrame` is not saved.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary with two keys, `problem` and `indicator`, and their corresponding values.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Check input variables type</span>
    <span class="n">validators</span><span class="o">.</span><span class="n">_variable_origin_static_type</span><span class="p">(</span>
        <span class="n">vars_types</span><span class="o">=</span><span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_indicators</span>
        <span class="p">),</span>
        <span class="n">vars_values</span><span class="o">=</span><span class="nb">locals</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Validate abbreviation of indicators</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_indicator_abbr</span><span class="p">(</span>
        <span class="n">indicators</span><span class="o">=</span><span class="n">indicators</span>
    <span class="p">)</span>

    <span class="c1"># Observed DataFrame</span>
    <span class="n">obs_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_observe</span><span class="p">(</span>
        <span class="n">obs_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">obs_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
        <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
        <span class="n">obs_col</span><span class="o">=</span><span class="n">obs_col</span>
    <span class="p">)</span>
    <span class="n">obs_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]</span>

    <span class="c1"># Retrieve sensitivity output</span>
    <span class="n">sensitivity_sim</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_sensitivity_output_retrieval</span><span class="p">(</span>
        <span class="n">sensim_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">sensim_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
        <span class="n">df_name</span><span class="o">=</span><span class="n">df_name</span><span class="p">,</span>
        <span class="n">add_problem</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_sample</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="c1"># Empty DataFrame to store scenario indicators</span>
    <span class="n">ind_df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">indicators</span>
    <span class="p">)</span>

    <span class="c1"># Iterate scenarios</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">sensitivity_sim</span><span class="p">[</span><span class="s1">&#39;scenario&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">sim_col</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;sim&#39;</span><span class="p">]</span>
        <span class="c1"># Merge scenario DataFrame with observed DataFrame</span>
        <span class="n">merge_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">obs_df</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span>
            <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span>
        <span class="p">)</span>
        <span class="c1"># Normalized DataFrame</span>
        <span class="n">norm_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_df_normalize</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">merge_df</span><span class="p">[[</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
            <span class="n">norm_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span>
        <span class="p">)</span>
        <span class="c1"># Iterate indicators</span>
        <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">indicators</span><span class="p">:</span>
            <span class="c1"># Store indicator value in DataFrame</span>
            <span class="n">ind_val</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">()</span><span class="o">.</span><span class="n">compute_from_abbr</span><span class="p">(</span>
                <span class="n">df</span><span class="o">=</span><span class="n">norm_df</span><span class="p">,</span>
                <span class="n">sim_col</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span>
                <span class="n">obs_col</span><span class="o">=</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span>
                <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span>
            <span class="p">)</span>
            <span class="n">ind_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">indicator</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_val</span>

    <span class="c1"># Reset index to scenario column</span>
    <span class="n">scnro_col</span> <span class="o">=</span> <span class="s1">&#39;Scenario&#39;</span>
    <span class="n">ind_df</span> <span class="o">=</span> <span class="n">ind_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span>
        <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">ind_df</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind_df</span><span class="p">[</span><span class="n">scnro_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="c1"># Save DataFrame</span>
    <span class="k">if</span> <span class="n">json_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">json_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="c1"># Raise error for invalid JSON file extension</span>
        <span class="n">validators</span><span class="o">.</span><span class="n">_json_extension</span><span class="p">(</span>
            <span class="n">json_file</span><span class="o">=</span><span class="n">json_file</span>
        <span class="p">)</span>
        <span class="c1"># Write DataFrame to the JSON file</span>
        <span class="n">ind_df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span>
            <span class="n">path_or_buf</span><span class="o">=</span><span class="n">json_file</span><span class="p">,</span>
            <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="mi">4</span>
        <span class="p">)</span>

    <span class="c1"># Output dictionary</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;problem&#39;</span><span class="p">:</span> <span class="n">sensitivity_sim</span><span class="p">[</span><span class="s1">&#39;problem&#39;</span><span class="p">],</span>
        <span class="s1">&#39;indicator&#39;</span><span class="p">:</span> <span class="n">ind_df</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>